<!DOCTYPE html>
<html>

<head>
  <script src="https://code.highcharts.com/stock/highstock.js"></script>
  <style>
    body {
      font-family: monospace;
      margin: 0;
      padding: 0;
    }
    h1,
    h2 {
      margin: 5px 0;
      text-align: center;
    }
    .cont {
      width: 95%;
      margin: auto;
      padding: 5px;
    }
  </style>
</head>

<body>
  <h1>GyverLibs Weekly Views</h1>
  <h2>Total</h2>
  <div class="cont" id="total"></div>
  <h2>Libs</h2>
  <div class="cont" id="libs"></div>

  <script>
    async function loadJSON() {
      const response = await fetch("traf.json");
      const json = await response.json();
      show(json);
    }
    function show(json) {
      let total = { data: json['total'], name: "Total" };
      let libs = [];
      for (let key in json) {
        if (key != 'total') libs.push({ data: json[key], name: key });
      }

      Highcharts.stockChart('total', {
        series: [total],
        "chart": {},
        "time": {
          "useUTC": false
        }
      });
      Highcharts.stockChart('libs', {
        series: libs,
        "chart": {
          "height": 2000
        },
        "tooltip": {
          "padding": 0
        },
        "time": {
          "useUTC": false
        }
      });
    }

    loadJSON();
  </script>
</body>

</html>